<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ELIGIWISE â€“ Bank / NBFC Policy Admin</title>

<style>
body{font-family:Arial,sans-serif;background:#eef2f7;margin:0}
.container{max-width:1200px;margin:20px auto;background:#fff;padding:25px;
          border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.08)}
h1{text-align:center;color:#0A4EA3;margin-top:0}
.section-title{background:#0A4EA3;color:#fff;padding:10px;margin-top:30px;
              font-weight:bold;border-radius:4px}
label{font-weight:bold;display:block;margin-top:12px}
input,select{width:100%;padding:8px;margin-top:5px;border-radius:4px;
             border:1px solid #ccc;box-sizing:border-box}
.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:15px}
.grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:15px}
.program-row{display:grid;grid-template-columns:1fr 1fr auto;gap:10px;margin-top:8px}
button{margin-top:15px;padding:9px 14px;background:#0A4EA3;color:#fff;border:none;
       border-radius:5px;cursor:pointer;font-size:13px}
button.add{background:#27ae60}
button.del{background:#c0392b}
button.secondary{background:#7f8c8d}
table{width:100%;border-collapse:collapse;margin-top:20px;font-size:13px}
table,th,td{border:1px solid #d0d7de}
th,td{padding:8px;text-align:left}
.actions button{margin-right:5px}
</style>

<script>
// simple protection: only ADMIN can open
if (localStorage.getItem("role") !== "ADMIN") {
  alert("Please login as ADMIN");
  location.href = "login.html";
}
</script>
</head>

<body>
<div class="container">

<h1>ELIGIWISE â€“ Bank / NBFC Policy Admin</h1>

<label>Bank / NBFC Name</label>
<input id="bankName" placeholder="Ex: HDFC, Tata Capital">

<!-- SECTION C + E only for ABB / GST / ITR to keep it simple -->
<div class="section-title">SECTION C â€“ BUSINESS & BANKING</div>

<div class="grid-3">
  <div>
    <label>Banking Type</label>
    <select id="bankingType">
      <option>All</option>
      <option>CA</option>
      <option>SA</option>
      <option>OD</option>
      <option>CA+OD</option>
      <option>SA+CA</option>
    </select>
  </div>
  <div>
    <label>ITR Required</label>
    <select id="itrRequired">
      <option>No</option>
      <option>Yes</option>
    </select>
  </div>
  <div>
    <label>GST Required</label>
    <select id="gstRequired">
      <option>No</option>
      <option>Yes</option>
    </select>
  </div>
</div>

<div class="section-title">SECTION E â€“ ABB PROGRAM</div>

<label>ABB Programs (Min â€“ Max)</label>
<div id="abbPrograms">
  <div class="program-row">
    <input id="abbMin" type="number" placeholder="ABB Min">
    <input id="abbMax" type="number" placeholder="ABB Max">
    <button class="del" onclick="this.parentNode.remove()">X</button>
  </div>
</div>
<button class="add" onclick="addProgram('abbPrograms')">+ Add ABB Program (extra, not used yet)</button>

<br><br>
<button onclick="savePolicy()">ðŸ’¾ Save Policy</button>

<h2>Saved Policies</h2>
<table id="policyTable">
  <thead>
    <tr>
      <th>#</th>
      <th>Bank</th>
      <th>ABB Min</th>
      <th>ABB Max</th>
      <th>GST Required</th>
      <th>ITR Required</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

</div>

<script>
// ---------- helper functions ----------
function addProgram(id){
  const container = document.getElementById(id);
  const row = document.createElement("div");
  row.className = "program-row";
  row.innerHTML = `
    <input type="number" placeholder="Min">
    <input type="number" placeholder="Max">
    <button class="del" onclick="this.parentNode.remove()">X</button>
  `;
  container.appendChild(row);
}

function getPolicies(){
  return JSON.parse(localStorage.getItem("eligiwisepolicies")) || []; // read from localStorage[web:21][web:23]
}

function setPolicies(arr){
  localStorage.setItem("eligiwisepolicies", JSON.stringify(arr));    // write to localStorage[web:21][web:23]
}

// ---------- SAVE ----------
function savePolicy(){
  const bankName = document.getElementById("bankName").value.trim();
  if (!bankName){
    alert("Please enter Bank / NBFC Name");
    return;
  }

  const policy = {
    bankName   : bankName,
    abbMin     : Number(document.getElementById("abbMin").value || 0),
    abbMax     : Number(document.getElementById("abbMax").value || 0),
    gstRequired: document.getElementById("gstRequired").value || "No",
    itrRequired: document.getElementById("itrRequired").value || "No"
  };

  const policies = getPolicies();
  policies.push(policy);
  setPolicies(policies);

  alert("Policy Saved Successfully");
  renderPolicies();  // refresh table
  document.getElementById("bankName").value = "";
  document.getElementById("abbMin").value = "";
  document.getElementById("abbMax").value = "";
}

// ---------- RENDER TABLE ----------
function renderPolicies(){
  const policies = getPolicies();
  const tbody = document.querySelector("#policyTable tbody");
  tbody.innerHTML = "";

  if (!policies.length){
    const tr = document.createElement("tr");
    tr.innerHTML = "<td colspan='6'>No policies saved</td>";
    tbody.appendChild(tr);
    return;
  }

  policies.forEach((p, idx) => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${idx + 1}</td>
      <td>${p.bankName}</td>
      <td>${p.abbMin}</td>
      <td>${p.abbMax}</td>
      <td>${p.gstRequired}</td>
      <td>${p.itrRequired}</td>
    `;
    tbody.appendChild(tr);
  });
}

// load existing data when page opens
document.addEventListener("DOMContentLoaded", renderPolicies);
</script>
</body>
</html>
