<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ELIGIWISE ‚Äì Eligibility Check</title>

<style>
body { font-family: Arial; background:#f4f6f8; }
.container { max-width:1000px; margin:20px auto; background:#fff; padding:20px; border-radius:10px; }
h1 { text-align:center; color:#0A4EA3; }
label { font-weight:bold; display:block; margin-top:10px; }
input, select { width:100%; padding:6px; margin-top:5px; }
button { margin-top:15px; padding:8px 14px; background:#0A4EA3; color:#fff; border:none; border-radius:5px; cursor:pointer; }
table { width:100%; border-collapse:collapse; margin-top:20px; }
th, td { border:1px solid #ccc; padding:8px; text-align:center; }
th { background:#0A4EA3; color:#fff; }
.eligible { color:green; font-weight:bold; }
.not { color:red; font-weight:bold; }
</style>
</head>

<body>
<div class="container">

<h1>ELIGIWISE ‚Äì Eligibility Check</h1>

<label>Business Vintage (Years)</label>
<input id="vintage">

<label>Turnover (Lakhs)</label>
<input id="turnover">

<label>Average Bank Balance ‚Äì ABB (Lakhs)</label>
<input id="abb">

<label>CIBIL Score</label>
<input id="cibil">

<label>Banking Type</label>
<select id="bankingType">
  <option>All Accounts Accepted</option>
  <option>Only Current Account</option>
  <option>Only OD/CC</option>
  <option>Only Savings</option>
  <option>CA + OD/CC</option>
</select>

<label>Own House</label>
<select id="ownHouse">
  <option>No</option>
  <option>Yes</option>
</select>

<label>GST Available</label>
<select id="gst">
  <option>No</option>
  <option>Yes</option>
</select>

<label>ITR Available</label>
<select id="itr">
  <option>No</option>
  <option>Yes</option>
</select>

<button onclick="checkEligibility()">üîç Check Eligibility</button>

<table id="resultTable" style="display:none">
<thead>
<tr>
  <th>Bank / NBFC</th>
  <th>Status</th>
  <th>Remarks</th>
</tr>
</thead>
<tbody></tbody>
</table>

</div>

<script>
function checkEligibility() {

  const policies = JSON.parse(localStorage.getItem("eligiwisePolicies")) || [];
  const tbody = document.querySelector("#resultTable tbody");
  tbody.innerHTML = "";

  if (policies.length === 0) {
    alert("No Bank Policies Found");
    return;
  }

  const v = Number(vintage.value);
  const t = Number(turnover.value);
  const a = Number(abb.value);
  const c = Number(cibil.value);

  policies.forEach(p => {

    let status = "Eligible";
    let reason = "All conditions matched";

    if (p.businessVintage && v < Number(p.businessVintage)) {
      status = "Not Eligible";
      reason = "Insufficient Business Vintage";
    }
    else if (p.turnover && t < Number(p.turnover)) {
      status = "Not Eligible";
      reason = "Turnover below requirement";
    }
    else if (p.abb && a < Number(p.abb)) {
      status = "Not Eligible";
      reason = "ABB below requirement";
    }
    else if (p.cibil && c < Number(p.cibil.split("-")[0])) {
      status = "Not Eligible";
      reason = "CIBIL score too low";
    }
    else if (p.bankingType && p.bankingType !== bankingType.value && p.bankingType !== "All Accounts Accepted") {
      status = "Not Eligible";
      reason = "Banking type mismatch";
    }
    else if (p.ownHouse === "Yes" && ownHouse.value !== "Yes") {
      status = "Not Eligible";
      reason = "Own house mandatory";
    }
    else if (p.gstRequired === "Yes" && gst.value !== "Yes") {
      status = "Not Eligible";
      reason = "GST required";
    }
    else if (p.itrRequired === "Yes" && itr.value !== "Yes") {
      status = "Not Eligible";
      reason = "ITR required";
    }

    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${p.bankName}</td>
      <td class="${status === "Eligible" ? "eligible" : "not"}">${status}</td>
      <td>${reason}</td>
    `;
    tbody.appendChild(tr);
  });

  document.getElementById("resultTable").style.display = "table";
}
</script>

</body>
</html>
