<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ELIGIWISE – Eligibility Check (Simple)</title>

<style>
body{font-family:Arial;background:#f4f6f8;margin:0}
.container{max-width:900px;margin:20px auto;background:#fff;padding:20px;
           border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.08)}
h2{text-align:center;color:#0A4EA3;margin-top:0}
h3{background:#0A4EA3;color:#fff;padding:10px;margin-top:25px;border-radius:4px}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
input,select{padding:8px;width:100%;box-sizing:border-box;border-radius:4px;
             border:1px solid #ccc}
button{padding:8px 12px;background:#2ea44f;color:#fff;border:none;cursor:pointer;
       border-radius:4px;font-size:13px}
button:hover{opacity:0.9}
.hidden{display:none}
table{width:100%;border-collapse:collapse;margin-top:15px;font-size:13px}
table,th,td{border:1px solid #ccc}
th,td{padding:6px;text-align:left}
#result{margin-top:10px;font-weight:bold}
</style>

<script>
if(localStorage.getItem("role")!=="DSA"){
  alert("Please login as DSA");
  location.href="login.html";
}
</script>
</head>

<body>
<div class="container">
<h2>ELIGIWISE – Eligibility Check</h2>

<h3>SECTION 1 – Business Details</h3>
<div class="grid">
  <input id="vintage" type="number" placeholder="Business Vintage (Years)">
  <input id="turnover" type="number" placeholder="Turnover (Lakhs)">
  <input id="bizPincode" placeholder="Business Place Pincode">
</div>

<h3>SECTION 2 – Banking & Documents</h3>
<div class="grid">
  <select id="bankingTypeCust">
    <option>Bank Statement Type</option>
    <option>SA</option><option>CA</option><option>OD</option><option>CC</option>
    <option>SA+CA</option><option>SA+OD</option><option>SA+CC</option>
    <option>CA+OD</option><option>CA+CC</option><option>ALL</option>
  </select>

  <input id="abb" type="number" step="0.01" placeholder="ABB (Lakhs)">

  <select id="gst" onchange="toggleGST()">
    <option value="No">GST: No</option>
    <option value="Yes">GST: Yes</option>
  </select>

  <input id="gstTurnover" class="hidden" type="number" placeholder="GST Turnover (Lakhs)">

  <select id="itr" onchange="toggleITR()">
    <option value="No">ITR: No</option>
    <option value="Yes">ITR: Yes</option>
  </select>

  <input id="itrTurnover" class="hidden" type="number" placeholder="ITR Turnover (Lakhs)">
</div>

<h3>SECTION 3 – Loans & Obligations</h3>
<div class="grid">
  <input id="cibilScore" type="number" placeholder="CIBIL Score">
  <input id="emiObligation" type="number" placeholder="Existing Monthly EMI (₹)">
  <input id="netMonthlyIncome" type="number" placeholder="Net Monthly Income (₹)">
</div>

<h3>SECTION 4 – Applicant & Co-Applicant</h3>
<div class="grid">
  <input id="appAge" type="number" placeholder="Applicant Age">

  <select id="coapp" onchange="toggleCo()">
    <option value="No">Co-Applicant: No</option>
    <option value="Yes">Co-Applicant: Yes</option>
  </select>

  <input id="coAge" class="hidden" type="number" placeholder="Co-Applicant Age">
</div>

<h3>SECTION 5 – Additional Fields</h3>
<p>(Reserved for future use)</p>

<button onclick="checkEligibility()">Check Eligibility</button>
<p id="result"></p>

<table id="eligibleBanks">
  <thead>
    <tr>
      <th>Eligible Bank / NBFC</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

</div>

<script>
// --- toggles ---
function toggleGST(){
  const gstSelect = document.getElementById("gst");
  const gstTurn = document.getElementById("gstTurnover");
  if (!gstSelect || !gstTurn) return;
  gstTurn.classList.toggle("hidden", gstSelect.value !== "Yes");
}
function toggleITR(){
  const itrSelect = document.getElementById("itr");
  const itrTurn = document.getElementById("itrTurnover");
  if (!itrSelect || !itrTurn) return;
  itrTurn.classList.toggle("hidden", itrSelect.value !== "Yes");
}
function toggleCo(){
  const coSelect = document.getElementById("coapp");
  const coAge = document.getElementById("coAge");
  if (!coSelect || !coAge) return;
  coAge.classList.toggle("hidden", coSelect.value !== "Yes");
}

// --- eligibility ---
<script>
function checkEligibility() {
  const policies = JSON.parse(localStorage.getItem("eligiwisepolicies")) || [];

  const tbody = document.querySelector("#eligibleBanks tbody");
  const resultP = document.getElementById("result");
  tbody.innerHTML = "";
  resultP.textContent = "";

  if (!policies.length) {
    resultP.textContent = "No policies found.";
    return;
  }

  policies.forEach(p => {
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${p.bankName}</td><td>ABB ${p.abbMin}–${p.abbMax}, GST ${p.gstRequired}, ITR ${p.itrRequired}</td>`;
    tbody.appendChild(tr);
  });
}


</script>
</body>
</html>

